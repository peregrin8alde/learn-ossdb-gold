---
title: "usecase"
linkTitle: "ユースケース図"
weight: 1
description: >
  ユースケース図.
---
= ユースケース図

////
大まかなユースケースを網羅することで登場するオブジェクトを洗い出す

ユースケースではユーザの操作のみ起点とし、サービス側の動きはシーケンス図の方で記載する？
ただし、他のユーザ操作に関わる動き（接続用ポートの待ち受けを開始するなど）はユースケース内にも記載する。
=> システム内のサブユースケースとして書くかどうかレベル

* ユースケースはコンセプトに反映
** 各コンセプトでは実行可能な手順（イメージを掴むための簡易なもの）と結果も記載。チュートリアルとは別物
=> 実行可能な手順は Overview / Concepts には基本書かない。
* シーケンスやアクティビティは Core Tasks や リファレンスに反映
** 各 Tasks では実行可能な手順と結果も記載。チュートリアルとは別物

目的ベース（サーバに接続するために設定など）で記述し、細かい話（接続設定の中のポート番号など）は別で説明

ユースケースの内容は Overview / Concepts だけで説明ができる範囲
例えば、 DB の起動や停止やサービス仕組みや利用の流れ（管理者が起動後に利用者が利用可能になる）として説明される

Overview / Concepts : ユーザは何ができるか（どんな目的を達成できるか）
GettingStarted / Tasks / Tutorials / Reference : ユーザは何をすべきか（どんな手順が必要となるのか）


tasks の章立てや各章／節の書き出し文章は usecase ベースとなるはず

////



////
svg にしておけば図内の文章をコピペ可能
ただし、生成された html 内では base64 変換された状態のため、図だけ別に開くなどが必要？
////
[plantuml, target=diagram-usecases, format=svg]
....
include::usecases.puml[]
....


////
5W2H で説明する？
=> ユースケースでそこまで書くのは細かすぎる
いつ、誰が、何のために、何をしたい？、くらいが良さそう
////

.ユースケース一覧
[options="header,autowidth",stripes=hover]
|===
|いつ |誰が |何のために |何をしたい
|===


.ユースケース一覧
[options="header,autowidth",stripes=hover]
|===
|When いつ|Who 誰が  |Where どこで、どこに |Why 何故 |What 何を |How much/many どれだけ |How どうした

|サービス設計時
|サービス提供者
|任意の場所
|利益を確保するために
|予算
|必要な額に
|任意の方法で決定

|サービス設計時
|サービス提供者
|任意の場所
|コストを計算するために
|利用可能なユーザ数
|必要な数に
|任意の方法で決定

|サービス設計時
|サービス提供者
|任意の場所
|コストを計算するために
|サーバ台数
|必要な数に
|任意の方法で決定

|サービス設計時
|サービス提供者
|任意の場所
|コストを計算するために
|サーバのスペック（ CPU / メモリー / ディスクなど）
|必要な数に
|任意の方法で決定

|サービス設計時
|サービス提供者
|任意の場所
|コストを計算するために
|利用可能なネットワーク帯域
|必要な数に
|任意の方法で決定

|サービス導入時
|サーバ管理者
|PostgreSQL サーバをインストールしたいマシン
|PostgreSQL サーバを利用可能にするため
|PostgreSQL サーバ
|1 つだけ
|コマンドラインからインストール

|サービス導入時
|サーバ管理者
|PostgreSQL サーバをインストールしたマシン
|PostgreSQL サーバに必要な資材を生成するため
|PostgreSQL クラスタ
|1 つだけ
|コマンドラインから初期化

|サービス導入時
|サーバ管理者
|PostgreSQL サーバをインストールしたマシン
|
|PostgreSQL サーバへの接続に関する情報
|
|設定ファイルに記述

|サービス導入時
|サーバ管理者
|PostgreSQL サーバをインストールしたマシン
|
|PostgreSQL サーバの冗長化に関する情報
|
|設定ファイルに記述

|サービス運用中
|サーバ管理者
|PostgreSQL サーバをインストールしたマシン
|運用を開始するため
|PostgreSQL サーバ
|1 つだけ
|コマンドラインで起動する

|サービス運用中
|サーバ管理者
|PostgreSQL サーバをインストールしたマシン
|運用を終了するため
|PostgreSQL サーバ
|1 つだけ
|コマンドラインで停止する

|サービス運用中
|サーバ管理者
|PostgreSQL サーバをインストールしたマシン
|
|PostgreSQL サーバ
|1 つだけ
|コマンドラインで起動状態を確認する

|サービス運用中
|サーバ管理者
|PostgreSQL サーバをインストールしたマシン
|
|PostgreSQL ユーザ
|必要な数だけ
|SQL で作成

|サービス運用中
|サーバ管理者
|PostgreSQL サーバをインストールしたマシン
|
|PostgreSQL ユーザ
|不要な数だけ
|SQL で削除

|サービス運用中
|サービス利用者
|PostgreSQL クライアントをインストールしたマシン
|データを提供するため
|レコードデータ
|提供したい数だけ
|SQL で挿入

|サービス運用中
|サービス利用者
|PostgreSQL クライアントをインストールしたマシン
|データを利用するため
|レコードデータ
|必要な数だけ
|SQL で参照

|===

サービス提供者が、データを管理するサービスを提供したいと考える。

DBMS の利用を決定する
PostgreSQL の利用を決定する

サービス提供者 : マシンやシステムなどを購入、手配して利用者に提供
サーバ管理者 : マシン、 OS 、ユーザ、サービスなどのインフラ、システム管理
サービス利用者 : サービスを利用してデータを管理


設計
見積

システム構成


設定
起動
停止
状態確認

サーバ管理者が行う設定
サービス利用者が行う設定

コストを決めるための設定
利用できる機能を決めるための設定
I/F を変えるための設定
出力を変えるための設定


PostgreSQL サーバが必要なプロセスを起動する


運用
データ準備
データ提供
データ利用

ユーザ管理


アプリ開発？

DB 作成や管理は誰がする？
データベース全体（クラスタ）はサーバ管理者で各DBはサービス利用者？

サービス利用者が DB の構造を設計する。
サービス利用者がテーブルの構造を設計する。
サービス利用者が使用されるディスク容量を見積もる。


サービス利用者がデータを作成する
サービス利用者がデータを格納する
サービス利用者がデータを参照する
サービス利用者がデータを更新する
サービス利用者がデータを削除する



監視
状態
ログ
統計

サービス利用者が操作ログを確認する
サービス利用者が操作結果メッセージを確認する


サーバ管理者が PostgreSQL サーバの動作ログを確認する
サーバ管理者が PostgreSQL サーバのアクセスログを確認する
サーバ管理者が PostgreSQL サーバの統計情報を確認する
サーバ管理者が PostgreSQL サーバのリソース使用量を確認する

保守
障害対応
移行
バックアップ、リストア
スケールアップ、ダウン
スケールアウト、イン

通信異常でネットワークが遮断される
ディスク異常で書き込みに失敗する
操作ミスでエラーが発生する
電源異常でマシンが停止する

サーバ管理者が復旧する

サーバ管理者がマシンを停止する
サーバ管理者がマシンを起動する


サーバ管理者がデータベースをバックアップする。

サーバ管理者が WAL をバックアップする。


廃止

サーバ管理者が PostgreSQL サーバをアンインストールする




ifdef::env-asciidoctor[]
:leveloffset: +1

include::install/_index.adoc[]
include::operation/_index.adoc[]
include::maintenance/_index.adoc[]
include::troubleshoot/_index.adoc[]
include::uninstall/_index.adoc[]


:leveloffset: -1
endif::[]
